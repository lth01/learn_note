
# 정규화(Normalization)란?
RDB는 데이터의 상관 관계를 테이블별로 관리하는 DataBase이다

예시를 들어보자.

게임 전적 테이블이 있다 생각했을때, 어떤 정보들이 있을까?

게임번호, 소환사명, 챔피언, 상대 소환사목록, 상대 챔피언 등등

여러 속성이 존재할 수 있다.

게임 전적 테이블 특정 레코드에서 상대 소환사목록을 추가하거나 삭제한다 생각하자.

우리는 기존 자료를 가진 상태에서 추가적인 추가 삭제 로직을 설계해야한다.

게임 전적 테이블은 필요한 테이블 정보를 가지고있지만, 각 데이터간 결합도가 너무 높다.

이는 유지보수, 테이블의 유연성에서 문제가 발생할 여지를 남겨두는 것이라 볼 수 있다.

## 그래서 정규화가 뭔데?
정규화는 이런 결합도가 높은 테이블을 여러개의 독립된 테이블로 정리하는 과정을 뜻한다.

총 5개의 정규화 과정이 있으나 실무에서는 1 ~ 3정규화까지만 수행한다.

## 제 1 정규화(1NF)
각 열(column)이 하나의 값을 가지게하는 과정

| 게임번호 | 소환사명 | 상대 소환사명                  |
| ---- | ---- | ------------------------ |
| 1    | 태북태북 | 소환사1,소환사2,소환사3,소환사4,소환사5 |

상대 소환사명에 여러 소환사명이 이어져있다.

이를 하나씩 분리한다.

| 게임번호 | 소환사명 | 상대 소환사명 |
| ---- | ---- | ------- |
| 1    | 태북태북 | 소환사1    |
| 1    | 태북태북 | 소환사2    |
| 1    | 태북태북 | 소환사3    |
| 1    | 태북태북 | 소환사4    |
| 1    | 태북태북 | 소환사5    |

## 제 2 정규화(NF)
제 1정규화를 거친 테이블을 보자.

소환사명은 모두 중복되므로, 각 행의 구분값으로 사용할 수 없다.

구분을 위해서는 (게임번호, 소환사명), (게임번호, 상대 소환사명)을 통해서 구분해야한다.

이렇게 기본키 이외 컬럼을 포함해야하만 행을 구분할 수 있는 경우 제 2정규화를 위반한 것이다. 따라서 제 1정규화를 마친 테이블은 다음과 같이 분리될 수 있다.

| 게임번호 | 소환사명 |
| ---- | ---- |
| 1    | 태북태북 |
| 1    | 태북태북 |
| 1    | 태북태북 |
| 1    | 태북태북 |
| 1    | 태북태북 |

| 게임번호 | 상대 소환사명 |
| ---- | ------- |
| 1    | 소환사1    |
| 1    | 소환사2    |
| 1    | 소환사3    |
| 1    | 소환사4    |
| 1    | 소환사5    |

## 제 3정규화(3NF)
제 2정규화를 마친 테이블이 있을 때,  기본 키를 제외한 속성간 **이행 종속성**이 없어야한다.

이행 종속성이 무엇이란 말인가..

일단 이를 명확히 알기 위해선 RDB의 **함수 종속성**을 알고있어야한다.
### 함수 종속성
'데이터베이스의 테이블에서 열X와 열Y를 테이블의 부분집합이라고 할 때, X값 각각에 대해 Y의 값이 오직하나로 결정되는 경우 Y는 X에 종속된다'
														-출처: 위키백과 함수종속성

X가 Y에 1:1일 대응을하는 형태인데, y = f(x) 함수와 같다.

### 이행 종속성
Primary Key를 제외한 열 x'도 Y의 값을 결정할 수 있는 경우 이행 종속성이 있다 이야기한다.

즉 우리는 Primary Key X를 통해 y1 = f(x), y2 = f(x)... 형태의 종속성을 갖기를 원하는데, 이행 종속성이 있는 테이블은

y1 = f(x), y2 = f(x), y3 = f(x)...
y1 = f(x'), y2 = f(x'), y3 = f(x')...


형태의 구조를 갖음을 의미한다.

### 제 3 정규화 과정

| 게임번호 | 소환사명   | 티어  |
| ---- | ------ | --- |
| 1    | 태북태북   | 챌린저 |
| 2    | 김나박이   | 골드  |
| 3    | 언럭키페이커 | 브론즈 |
위의 테이블은 1 -> 태북태북 -> 챌린저의 관계를 만족하므로 분리한다.

| 게임번호 | 소환사명   |
| ---- | ------ |
| 1    | 태북태북   |
| 2    | 김나박이   |
| 3    | 언럭키페이커 |

| 소환사명   | 티어  |
| ------ | --- |
| 태북태북   | 챌린저 |
| 김나박이   | 골드  |
| 언럭키페이커 | 브론즈 |
