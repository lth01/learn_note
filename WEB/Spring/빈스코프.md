---
Date: 2024-03-13
reference: 스프림 핵심 원리 - 기본편
---
## 빈 스코프
우리는 지금까지 빈이 스프링 컨테이너의 시작과 종료까지 같이 간다고 알고있었다.
지금까지는 스프링 빈이 싱글톤 스코프로 생성되기 때문이다. 이외에도 여러 스코프들이 있는데, 한번 확인해보자

### 빈 스코프 종류
1. **싱글톤**:기본 스코프, 스프링 컨테이너의 시작과 종료까지 유지되는 가장 넓은 범위의 스코프
2. **프로토타입**: 스프링 컨테이너는 프로토타입 빈의 생성과 의존관계 주입까지만 관여하고, 더는 관리하지 않는 매우 짧은 범위의 스코프이다.
3. **웹 관련 스코프**
	- **"request"**:웹 요청이 들어오고 나갈때까지 유지되는 스코프
	- **"session"**: 웹 세션이 생성되고 종료될 때까지 유지되는 스코프
	- **"application"**: 웹의 서블릿 컨텍스트와 같은범위로 유지되는 스코프


#### 프로트타입 스코프
싱글톤 스코프의 빈을 조회하면 스프링 컨테이너는 언제나 같은 빈을 반환한다. 하지만 프로토타입 스코프의 빈을 컨테이너에 요청하면 매번 새로운 빈을 반환한다.

1. 클라이언트가 프로토타입 스코프의 빈을 요청한다.
2. 요청 시점에 프로토 타입 빈을 생성하고, 필요한 의존관계를 주입한다.
3. 스프링 컨테이너는 생성한 프로토타입 빈을 클라이언트에 반환한다.
1~3을 반복한다.

핵심은 스프링 컨테이너가 생성 및 의존 관계 주입 이후의 프로토타입 스코프의 동작을 관여하지 않는다는 점이다.
따라서, `@PreDestroy`와 같은 어노테이션은 동작하지 않는다.
-> 프로토타입 빈을 받은 클라이언트가 이를 관리할 책임을 갖는다.

> 여기서 클라이언트는 웹 클라이언트가 아니다!!
> getBean같은 메서드로 빈을 가져올 때마다 생성 및 DI가 이루어지는 것이다.

그렇다면, 이런 프로토타입 빈은 언제 사용할까?
- 싱글톤 스코프 빈은 컨테이너에 지속적으로 적재되어있는 특징이 있다. 이는 가끔 일어나는 로직과 관련된 빈도 계속 메모리에 적재되어있다는 문제가 될 수 있다.

